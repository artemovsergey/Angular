# Подготовка

Во второй главе мы перейдем от теории к практике: точнее, выберем вид
веб-приложения, которое мы хотим создать, и как мы можем это сделать в соответствии с ожиданиями
типичного владельца продукта.
Во второй части этой главы мы начнем путь разработки с настройки локальной среды разработки и создания первых проектов Angular и ASP.NET Core.
Вот полная разбивка тем, которые мы собираемся осветить:
- Комплексный подход: важность умения научиться проектировать, собирать и
доставить готовый продукт
- Многостраничные приложения (MPA), одностраничные приложения (SPA), собственные веб-приложения.
(NWA) и прогрессивные веб-приложения (PWA): ключевые особенности и наиболее важные
различия между различными типами веб-приложений, а также то, насколько хорошо ASP.NET и
Angular может относиться к каждому из них.
- Пример проекта SPA: что мы будем делать на протяжении всей книги.
- Подготовка рабочего пространства: как настроить нашу рабочую станцию для достижения нашей первой цели – реализации простого шаблона Hello World, который будет расширен в следующих главах.
К концу главы у нас будет все необходимое, чтобы начать путь полнофункциональной разработки.

# Технические требования
В этой главе нам понадобятся все технические требования, перечисленные в предыдущих главах, с
никаких дополнительных ресурсов, библиотек или пакетов.
Файлы кода для этой главы можно найти здесь: https://github.com/PacktPublishing/ASP.NETCore-6-and-Angular/tree/main/Chapter_02.

Комплексный подход
Обучение совместному использованию ASP.NET Core и Angular означает возможность работать как с интерфейсом, так и с интерфейсом.
(клиентская часть) и серверная часть (серверная часть) веб-приложения; другими словами, это значит быть
возможность спроектировать, собрать и доставить законченный продукт.
В конце концов, чтобы сделать это, нам нужно будет разобраться в следующем:
- Внутреннее программирование
- Внешнее программирование
- Стилизация пользовательского интерфейса и UX-дизайн.
- Проектирование, моделирование, настройка и администрирование базы данных.
- Настройка и администрирование веб-сервера
- Развертывание веб-приложений
  
На первый взгляд может показаться, что такой подход противоречит здравому смыслу; один разработчик
нельзя позволять делать все самостоятельно. Каждый разработчик знает, что серверная часть и
интерфейсная часть требует совершенно других навыков и опыта, так зачем нам это делать?
Прежде чем ответить на этот вопрос, мы должны понять, что на самом деле мы имеем в виду, когда говорим «возможность».
к. Нам не обязательно становиться экспертами на каждом отдельном уровне стека; от нас этого никто не ожидает. Когда
мы решили использовать комплексный подход, что нам действительно нужно сделать, так это повысить уровень осведомленности
по всему стеку, над которым мы работаем; это означает, что нам нужно знать, как работает серверная часть
работает, и как он может и будет подключен к интерфейсу. Нам нужно знать, какими будут данные
сохраняются, извлекаются и затем обслуживаются через клиент. Нам необходимо признать взаимодействие, которое мы
нужно будет распределить между различными компонентами, из которых состоит наше веб-приложение, и
нам необходимо знать о проблемах безопасности, механизмах аутентификации, стратегиях оптимизации, нагрузке
методы балансировки и так далее.
Это не обязательно означает, что мы должны обладать сильными навыками во всех этих областях; собственно говоря,
мы вряд ли когда-нибудь это сделаем. Тем не менее, если мы хотим использовать комплексный подход, нам необходимо понимать
смысл, роль и сфера применения всех из них. Кроме того, мы должны быть в состоянии пройти через
любое из этих полей всякий раз, когда нам нужно.

# MPA, SPA, PWA и NWA
Чтобы продемонстрировать, как ASP.NET и Angular могут в полной мере работать вместе, мы не смогли
подумайте о чем-нибудь лучше, чем создавать небольшие SPA-проекты с большинством, если не со всеми, функциями PWA.
Причина такого выбора вполне очевидна: не существует лучшего способа продемонстрировать некоторые из
лучшие функции, которые они могут предложить в настоящее время. У нас будет возможность работать с современными интерфейсами
и шаблоны, такие как HTML5 pushState API, веб-перехватчики, запросы на основе передачи данных, динамические
веб-компоненты, привязки данных пользовательского интерфейса и архитектура на основе AJAX без сохранения состояния, способная безупречно
охватывающая все эти особенности. Мы также будем эффективно использовать некоторые отличительные функции PWA, такие как
как сервисные работники и файлы веб-манифестов.

Если вы не знаете значения этих определений и сокращений, не волнуйтесь, мы собираемся изучить
эти концепции в следующих нескольких разделах, посвященных перечислению наиболее важных
функции следующих типов веб-приложений: MPA, SPA, PWA и NWA. Пока мы там,
мы также попытаемся выяснить наиболее распространенные ожидания владельцев продукта от типичного веб-сайта.
проект.
Многостраничные приложения
Многостраничные приложения, также известные как MPA, — это веб-приложения, которые работают в традиционном режиме.
способ: каждый раз, когда пользователь запрашивает (или отправляет) данные на сервер, он отображает новую страницу, которая отправляется
обратно в браузер.
Именно так работали все веб-сайты в течение первых 20 лет существования Всемирной паутины, и так до сих пор.
наиболее широко используемый подход в настоящее время из-за ряда преимуществ, которые MPA все еще могут обеспечить:
отличные показатели SEO, быстрое и устойчивое обучение, возможность управления и настройки
статический и динамический контент, а также множество отличных систем управления контентом (CMS), фреймворков,
и темы пользовательского интерфейса, такие как WordPress, Joomla и т.п., которые можно использовать для их создания из
размолоть за несколько минут.
Однако MPA также имеет некоторые существенные недостатки: требуемые обращения к серверу имеют тенденцию
сделать их довольно дорогими с точки зрения пропускной способности; кроме того, front-end и back-end разработка
часто тесно связаны, что усложняет их обслуживание и обновление. К счастью, большая часть
эти проблемы были устранены на протяжении многих лет благодаря различным функциям браузера и технологическим улучшениям, таким как CDN, кэширование на стороне сервера, запросы AJAX и т. д. В то же время,
такие методы усложняют этапы разработки и развертывания; то есть, если мы
решили положиться на одну из платформ CMS, о которых мы говорили ранее, тем самым отказавшись от большинства
аспектов кодирования – со всеми вытекающими последствиями.

Одностраничные приложения
Короче говоря, SPA — это веб-приложение, которое пытается обеспечить тот же пользовательский опыт, что и
настольное приложение. Если принять во внимание тот факт, что все SPA по-прежнему обслуживаются через веб-сервер и
доступ к которому осуществляется через веб-браузеры, как и к любому другому стандартному веб-сайту, мы можем легко понять, как
что желаемый результат может быть достигнут только путем изменения некоторых обычно используемых шаблонов по умолчанию.
в веб-разработке, например загрузка ресурсов, управление DOM и навигация по пользовательскому интерфейсу. В хорошем СПА
как контент, так и ресурсы (HTML, JavaScript, CSS и т. д.) извлекаются за один раз.
загрузка страницы или динамически извлекаются при необходимости. Это также означает, что страница не перезагружается или
обновить; он просто меняется и адаптируется в ответ на действия пользователя, выполняя необходимые серверные действия.
звонки за кулисами.
Вот некоторые из ключевых функций, предоставляемых конкурентоспособными SPA в настоящее время:
• Никаких обращений на серверную сторону. Конкурирующие SPA могут перерисовывать любую часть пользовательского интерфейса клиента без
требуется полный цикл обработки на стороне сервера для получения полной HTML-страницы. В основном это достигается за счет
реализация принципа разделения задач (SOC), что означает, что данные
исходный код, бизнес-логика и уровень представления будут разделены.

Одностраничные приложения
Короче говоря, SPA — это веб-приложение, которое пытается обеспечить тот же пользовательский опыт, что и
настольное приложение. Если принять во внимание тот факт, что все SPA по-прежнему обслуживаются через веб-сервер и
доступ к которому осуществляется через веб-браузеры, как и к любому другому стандартному веб-сайту, мы можем легко понять, как
что желаемый результат может быть достигнут только путем изменения некоторых обычно используемых шаблонов по умолчанию.
в веб-разработке, например загрузка ресурсов, управление DOM и навигация по пользовательскому интерфейсу. В хорошем СПА
как контент, так и ресурсы (HTML, JavaScript, CSS и т. д.) извлекаются за один раз.
загрузка страницы или динамически извлекаются при необходимости. Это также означает, что страница не перезагружается или
обновить; он просто меняется и адаптируется в ответ на действия пользователя, выполняя необходимые серверные действия.
звонки за кулисами.
Вот некоторые из ключевых функций, предоставляемых конкурентоспособными SPA в настоящее время:
• Никаких обращений на серверную сторону. Конкурирующие SPA могут перерисовывать любую часть пользовательского интерфейса клиента без
требуется полный цикл обработки на стороне сервера для получения полной HTML-страницы. В основном это достигается за счет
реализация принципа разделения задач (SOC), что означает, что данные
исходный код, бизнес-логика и уровень представления будут разделены.

Эффективная маршрутизация: конкурентоспособный SPA способен отслеживать текущее состояние и местоположение пользователя.
на протяжении всей навигации с использованием организованных маршрутизаторов на основе JavaScript. Мы поговорим
подробнее об этом в следующих главах, когда мы представим концепции серверной и
маршрутизация на стороне клиента.
• Производительность и гибкость. Конкурирующие SPA обычно передают клиенту весь свой пользовательский интерфейс.
к выбранному вами JavaScript SDK (Angular, jQuery, Bootstrap и т. д.). Часто это полезно для
производительность сети, поскольку увеличение рендеринга на стороне клиента и автономной обработки снижает
Влияние пользовательского интерфейса по сети. Однако реальная выгода, которую дает этот подход, заключается в гибкости.
предоставляется пользовательскому интерфейсу, поскольку разработчик сможет полностью переписать интерфейс приложения.
практически не влияя на сервер, за исключением нескольких файлов статических ресурсов.
Этот список может легко расшириться, поскольку это лишь некоторые из основных преимуществ правильно спроектированного и конкурентоспособного SPA. Эти аспекты играют важную роль в настоящее время, поскольку многие бизнес-сайты и сервисы
переход от традиционного мышления MPA к полностью преданным или гибридным подходам на основе SPA.

Прогрессивные веб-приложения
В 2015 году появился еще один шаблон веб-разработки, когда Фрэнсис Берриман (
британский дизайнер-фрилансер) и Алекс Рассел (инженер Google Chrome) использовали термин PWA для обозначения
впервые обращаюсь к тем веб-приложениям, которые могли бы воспользоваться парочкой новых важных
функции, поддерживаемые современными браузерами: сервис-воркеры и файлы веб-манифестов. Эти два важных
улучшения могут быть успешно использованы для реализации некоторых функций, обычно доступных только на
мобильные приложения — push-уведомления, автономный режим, доступ к оборудованию на основе разрешений и т. д. — с использованием
стандартные инструменты веб-разработки, такие как HTML, CSS и JavaScript.
Рост популярности PWA начался 19 марта 2018 года, когда Apple реализовала поддержку сервисных работников в
Сафари 11.1. С тех пор PWA получили широкое распространение во всей отрасли благодаря своим
неоспоримые преимущества перед «непрогрессивными» аналогами: более быстрое время загрузки, меньшие размеры приложений, более высокая вовлеченность аудитории и так далее.
Вот основные технические характеристики PWA (по данным Google):
• Прогрессивный: работает для каждого пользователя, независимо от выбора браузера, с использованием принципов прогрессивного улучшения.
• Адаптивный: подходит для любого форм-фактора: настольного компьютера, мобильного телефона, планшета или форм, которые еще не появились.
• Независимость от подключения: работники службы допускают использование в автономном режиме или в сетях низкого качества.
• Похожий на приложение: для пользователя он воспринимается как приложение с интерфейсами и навигацией в стиле приложения.
• Свежий: всегда актуальный благодаря процессу обновления сервисного работника.
• Безопасно: обслуживается через HTTPS, чтобы предотвратить слежку и гарантировать, что контент не будет подделан.
• Обнаруживаемый: идентифицируется как приложение по файлу веб-манифеста (manifest.json) и
зарегистрированный сервисный работник и доступен поисковым системам
• Возможность повторного вовлечения: возможность использовать push-уведомления для поддержания взаимодействия с пользователем.
• Возможность установки: предоставляет значки на главном экране без использования магазина приложений.
• Возможность ссылки: можно легко поделиться через URL-адрес и не требуется сложная установка.


Однако их технические базовые критерии могут быть ограничены следующим подмножеством:
• HTTPS: они должны обслуживаться из безопасного источника, то есть через TLS с зеленым замком.
дисплеи (без активного смешанного контента)
• Минимальный автономный режим: они должны иметь возможность запускаться, даже если устройство не подключено к сети.
Интернет, с ограниченными функциями или, по крайней мере, с отображением пользовательской автономной страницы.
• Сервисные работники: им необходимо зарегистрировать сервисного работника с помощью обработчика событий выборки (который
требуется для минимальной автономной поддержки, как объяснялось ранее)
• Файл веб-манифеста: они должны ссылаться на действительный файл манифеста.json, содержащий как минимум четыре ключа.
свойства (name, short_name, start_url и display) и минимальный набор необходимых иконок

Несмотря на некоторые сходства, PWA и SPA — это две разные концепции, предъявляющие разные требования и различающиеся во многих важных аспектах. Как мы видим, ни одно из требований PWA
упомянутое ранее относится к SPA или обращениям на стороне сервера. PWA может работать в одном HTML-коде.
страницы и запросы на основе AJAX (таким образом, также являясь SPA), но он также может запрашивать другие, отображаемые на сервере
(или статические) страницы и/или выполнять стандартные HTTP-запросы GET или POST, очень похожие на MPA. Это также
наоборот: любой SPA может реализовать любой отдельный технический критерий PWA, в зависимости от продукта.
требования владельца (подробнее об этом позже), принятые серверные и клиентские платформы, а также
конечная цель разработчика.

Нативные веб-приложения
Первое хорошее определение собственных веб-приложений (также известных как NWA), доступное в сети, может
возможно, можно найти в сообщении в блоге Сэма Джонстона, написанном 16 января 2009 года, которое выглядело следующим образом:

Нативное веб-приложение (NWA) — это веб-приложение, которое на 100 % поддерживается всеми
окно с помощью современных веб-браузеров, соответствующих стандартам.

Похожий подход был использован 6 лет спустя (22 января 2015 г.) Хенриком Йоретегом для описания определяющих
Особенность NWA:

Все эти приложения объединяет то, что все они зависят от встроенной сети.
технологии: HTML, CSS и JavaScript (возможно, в этот список можно добавить WebGL).

Эти определения помогают нам понять, что мы имеем дело с довольно общим термином, охватывающим
SPA, MPA и даже PWA — поскольку все они зависят от поддерживаемых собственных веб-технологий.
«из коробки» всеми последними браузерами; однако из-за акцента, уделяемого последнему ключевому слову и
существования более конкретных типов веб-приложений, термин NWA чаще всего используется для обозначения
те веб-приложения, которые, хотя и созданы с использованием современных веб-технологий, не могут быть
классифицируются как MPA, SPA или PWA, поскольку они склонны применять гибридный подход.
Поскольку мы собираемся использовать Angular, который предназначен для разработки SPA и имеет сильную
и устойчивое внедрение сервис-воркера, начиная с версии 5, мы имеем полное право воспользоваться преимуществами
лучшее из обоих миров. Именно по этой причине мы собираемся использовать сервис-воркеров – наряду с преимуществами повышенной надежности и производительности, которые они обеспечивают – всякий раз, когда нам нужно, сохраняя при этом
основательный SPA-подход. Кроме того, мы определенно собираемся реализовать какой-то стратегический HTTP-раунд.
поездки (и/или другие методы, основанные на перенаправлении), когда мы можем с выгодой использовать микросервис для подъема
снять часть рабочей нагрузки с нашего приложения, как это и должно делать любое хорошее NWA.
Могут ли все эти функции отвечать современным потребностям рынка? Давайте попробуем это выяснить.

Ожидания владельца продукта
Одна из самых интересных, но недооцененных концепций многих современных Agile-программ.
фреймворков разработки, таких как Scrum, — это то значение, которое придается значениям и определениям.
ролей. Среди этих ролей нет ничего более важного, чем владелец продукта, также известный как
клиент в методологии экстремального программирования или представитель клиента в другом месте. Они
те, кто привносит в процесс разработки ожидания, которые нам придется изо всех сил пытаться удовлетворить. Они скажут нам
что наиболее важно выполнить и когда они расставят приоритеты в нашей работе, исходя из ее явной цели
ценность, а не ее основная архитектурная ценность. Руководство наделит их полномочиями
принимать решения и принимать трудные решения, что иногда хорошо, иногда нет; это часто будет иметь большое значение
влияние на наш график разработки. Короче говоря, они отвечают за проект; это
почему, чтобы создать веб-приложение, соответствующее их ожиданиям, нам необходимо понять их
видение и чувствовать его, как если бы оно было нашим собственным.
Это всегда так, даже если владельцем продукта проекта является наш папа, жена или лучший друг: так это работает.
Теперь, когда мы это прояснили, давайте взглянем на некоторые из наиболее распространенных ожиданий владельцев продукта от типичного веб-проекта SPA. Нам следует посмотреть, будет ли выбор в пользу использования ASP.NET
и Angular будет достаточно хорош для выполнения каждого из них, а именно:
• Ранние выпуски: независимо от того, что мы продаем, клиент всегда захочет увидеть, что он продает.
покупка. Например, если мы планируем использовать гибкую среду разработки, такую как Scrum, мы
должны выпускать потенциально готовый к отправке продукт в конце каждого спринта или, если мы ищем
Чтобы принять подход, основанный на водопаде, у нас будут вехи. Одно можно сказать наверняка:
лучшее, что мы можем сделать для эффективной организации наших усилий по развитию, — это принять
итеративный и/или модульно-ориентированный подход.

ASP.NET и Angular, а также четкое разделение задач, обеспечиваемое их базовыми
Шаблоны на основе MVC или MVVM изящно подтолкнут нас к мышлению, необходимому для этого.
• Графический интерфейс над серверной частью: нас часто просят поработать над графическим интерфейсом и функциями внешнего интерфейса.
потому что они будут единственными вещами, которые будут видны и измеримы для клиента. Этот
по сути это означает, что нам придется смоделировать модель данных и начать работать над интерфейсом
как можно скорее, откладывая реализацию серверной части настолько (и как можно дольше), насколько это возможно.
Обратите внимание, что такой подход не обязательно плох; мы не будем делать это только для того, чтобы удовлетворить
ожидания владельца продукта.
Напротив, выбор использования ASP.NET вместе с Angular даст нам возможность
легко разделить уровень представления и уровень данных, реализовав первый и высмеивая
последнее, и это здорово. Мы сможем увидеть, куда мы идем, прежде чем тратить зря
ценное время или быть вынужденным принимать потенциально неправильные решения. Интерфейс веб-API ASP.NET предоставит необходимые инструменты для этого, позволяя нам создать образец веб-приложения.
скелет за считанные секунды с использованием шаблонов контроллеров, доступных в Visual Studio.
и контексты данных в памяти на базе Entity Framework Core, к которым мы сможем получить доступ.
сначала используя модели Entity и код. Как только мы это сделаем, мы сможем переключиться на дизайн графического интерфейса.
используя набор инструментов слоя представления Angular столько, сколько захотим, пока не достигнем желаемого
Результаты. Как только мы будем удовлетворены, нам просто нужно будет правильно реализовать контроллер веб-API.
интерфейсы и подключить фактические данные.
• Быстрое завершение: Ничто из вышеперечисленного не будет работать, если нам не удастся выполнить все в разумные сроки. Это одна из ключевых причин принять решение о принятии
серверная и клиентская среда, которые легко работают вместе. АСП.NET и
Angular — это предпочтительный инструмент не только потому, что оба они построены на прочной, последовательной основе,
но также потому, что они предназначены именно для этого – выполнять работу на своих сторонах.
и предоставить удобный интерфейс другому партнеру.
• Адаптивность. Как указано в Манифесте Agile, способность реагировать на запросы на изменения
важнее, чем следовать плану. Это особенно актуально при разработке программного обеспечения, где
мы можем даже заявить, что все, что не может справиться с изменениями, является провальным проектом. Это еще один
отличный повод принять разделение задач, обеспечиваемое двумя выбранными нами рамками,
поскольку это дает разработчику возможность управлять и даже в некоторой степени приветствовать большинство
планировки или структурных изменений, которые ожидаются на этапе разработки.

Вот и все. Обратите внимание, что мы не рассмотрели здесь все, поскольку это было бы невозможно без контекста.
фактического задания. Мы просто попытались дать развернутый ответ на следующий общий вопрос:
если бы нам пришлось создать SPA и/или PWA, были бы ASP.NET и Angular подходящим выбором? 
ответ, несомненно, да, особенно при совместном использовании.
Означает ли это, что мы уже закончили? Это не шанс, поскольку мы не собираемся принимать это предположение.
как должное. И наоборот, нам пора продемонстрировать это, перестав говорить общими словами и
начинаем приводить дело в движение. Именно это мы и собираемся сделать в следующем разделе: подготовиться,
создайте и протестируйте пример проекта SPA.

Пример СПА-проекта
Сейчас нам нужно придумать подходящий сценарий тестового примера, аналогичный тем, которые мы в конечном итоге создадим.
с чем приходится иметь дело – пример проекта SPA со всеми основными аспектами, которые мы ожидаем от потенциально готового к поставке продукта.
Для того, чтобы это сделать, первое, что нам нужно сделать, это стать на минуту нашим собственным клиентом и
придумать идею, видение, которым можно поделиться с другим «я». После этого мы сможем разместить нашего разработчика
снова наденьте туфли и разбейте наш абстрактный план на список пунктов, которые нам нужно будет реализовать; эти предметы будут
быть основными требованиями нашего проекта. Наконец, мы настроим нашу рабочую станцию, получив необходимые
пакеты, добавление файлов ресурсов и настройка платформ ASP.NET и Angular в
интегрированная среда разработки Visual Studio.
Не обычный Hello World!
Код, который мы собираемся написать в этой книге, не будет просто поверхностной демонстрацией полного стека.
концепции развития; мы не будем бросать тут и там рабочий код и ждать, что вы подключитесь
точки. Наша цель — создавать надежные и реалистичные веб-приложения с использованием серверных веб-API и
клиентские пользовательские интерфейсы — с использованием выбранных нами фреймворков, и мы также собираемся сделать это после
современные лучшие практики разработки.
Каждая глава будет посвящена одному основному аспекту. Если вы чувствуете, что уже знаете свой путь
там, не стесняйтесь переходить к следующему. И наоборот, если вы готовы следовать за нами на протяжении всего
цикл, вы совершите отличное путешествие по наиболее полезным аспектам ASP.NET и Angular, а также
как они могут работать вместе для решения наиболее распространенных и полезных задач веб-разработки, начиная с
от самых тривиальных до более сложных зверей. Это инвестиция, которая принесет дивиденды после ее ухода.
вы получите поддерживаемый, расширяемый и хорошо структурированный проект, а также знания, необходимые для создания
твой собственный. Следующие главы проведут нас через это путешествие. Во время поездки мы также узнаем
как позаботиться о некоторых важных аспектах высокого уровня, таких как SEO, безопасность, проблемы с производительностью, лучшие
практики кодирования и развертывания, поскольку они станут очень важными, если/когда наши приложения будут
в конечном итоге опубликовано в производственной среде.
Чтобы не сделать все слишком скучно, мы постараемся выбрать приятные темы и сценарии, которые также будут иметь
некоторая польза в реальном мире: чтобы лучше понять, что мы имеем в виду – никаких спойлеров – просто
придется продолжать читать.

Подготовка рабочего места
Первое, что нам нужно сделать, это настроить нашу рабочую станцию; это не составит труда, потому что нам нужен только небольшой
набор необходимых инструментов. К ним относятся Visual Studio 2022, обновленная среда выполнения Node.js,
веб-сервер (например, встроенный IIS Express) и достойную систему контроля исходного кода, например Git. Мы
последнее мы примем как должное, поскольку, скорее всего, оно у нас уже запущено и работает.
В следующих разделах мы настроим проект веб-приложения, установим или обновим пакеты и библиотеки, а также соберем и, в конечном итоге, протестируем результат нашей работы. Однако прежде чем сделать это, мы собираемся
потратить пару минут на понимание очень важной концепции, которая необходима для правильного использования
эту книгу, не причиняя (эмоциональной) боли – по крайней мере, на мой взгляд.
Отказ от ответственности: не пытайтесь (не) пробуйте это дома.
Прежде чем продолжить, нам нужно понять кое-что очень важное. Если вы опытный
веб-разработчик, вы, скорее всего, уже об этом знаете; однако, поскольку эта книга предназначена (почти)
Всем привет, я чувствую, что очень важно разобраться с этим вопросом как можно скорее.
В этой книге будет широко использоваться ряд различных инструментов программирования, внешних компонентов,
сторонние библиотеки и так далее. Большинство из них (например, TypeScript, npm, NuGet, большинство фреймворков/пакетов/сред выполнения .NET и т. д.) поставляются вместе с Visual Studio 2022, а другие (например,
как Angular, его необходимые зависимости JavaScript и другие сторонние серверные и клиентские стороны.
пакеты) будут загружены из их официальных репозиториев. Эти вещи предназначены для совместной работы в
100% совместимый мод; однако все они могут быть изменены и обновлены в ходе неизбежного
течение времени. Со временем появляется вероятность того, что эти обновления могут повлиять на их взаимодействие.
друг с другом, и здоровье проекта улучшится.


Миф о сломанном коде
В попытке свести к минимуму вероятность появления неработающего кода эта книга всегда будет работать с
фиксированные версии/сборки любого стороннего компонента, которые можно обрабатывать с помощью файлов конфигурации.
Однако некоторые из них, например обновления Visual Studio и/или .NET SDK, могут выходить за рамки этой области.
и может нанести ущерб проекту. Исходный код может перестать работать, или Visual Studio может
вдруг не сможете его правильно скомпилировать.
Когда происходит что-то подобное, у менее опытного человека всегда будет искушение свалить вину на себя.
на самой книге. Некоторые из них могут даже подумать примерно так: существует множество компилируемых
ошибки, следовательно, исходный код должен быть сломан!
Альтернативно они могут подумать так: Пример кода не работает: автор, должно быть, поторопил события.
тут и там и забыл проверить то, что писал.

Само собой разумеется, что такие гипотезы редко бывают верными, особенно если учесть количество времени,
которые авторы, редакторы и технические рецензенты этих книг тратят на написание, тестирование и доработку исходного кода перед его созданием, размещением на GitHub и часто даже публикацией.
рабочие экземпляры полученных приложений на общедоступных веб-сайтах по всему миру.

Любой опытный разработчик легко поймет, что большинство из этих вещей даже невозможно сделать.
если где-то был неработающий код; эта книга никоим образом не может даже попытаться попасть в
полках без 100% рабочего исходного кода, за исключением нескольких возможных мелких опечаток, которые
будет быстро сообщено издателю и, таким образом, через некоторое время исправлено в репозитории GitHub.
В том маловероятном случае, когда это выглядит так, как будто это не так, например, возникают неожиданные ошибки компиляции, новичок
разработчик должен потратить разумное количество времени, пытаясь понять основную причину.
Вот список вопросов, на которые им следует попытаться ответить прежде всего:
• Использую ли я ту же среду разработки, сторонние библиотеки, версии и сборки, которые используются в книге?
• Если я обновил что-то, потому что почувствовал необходимость в этом, знаю ли я об изменениях, которые могут
повлиять на исходный код? Прочитал ли я соответствующие журналы изменений? Потратил ли я разумную сумму
времени на поиск критических изменений и/или известных проблем, которые могли бы иметь
влияние на исходный код?
• Затронут ли эта проблема репозиторий книги на GitHub? Пытался ли я сравнить его со своим
код, возможно, заменивший мой?
Если ответ на любой из этих вопросов отрицательный, то велика вероятность, что проблема не связана с этой книгой.

Оставайся голодным, оставайся глупым, но при этом будь ответственным.
Не поймите меня неправильно: если вы хотите использовать более новую версию Visual Studio, обновить компилятор TypeScript или обновить любую стороннюю библиотеку, вам определенно рекомендуется это сделать. Это не что иное
чем основная цель этой книги – дать вам полное представление о том, что вы делаете и на что способны,
за пределами приведенных примеров кода.
Однако если вы чувствуете, что готовы это сделать, вам также придется соответствующим образом адаптировать код; большинство
время мы говорим о тривиальных вещах, особенно в наши дни, когда вы можете найти проблему в Google и/или
получите решение проблемы переполнения стека.

Изменили ли они имя свойства или метода? Затем вам нужно загрузить новое написание. Иметь
они перенесли класс в другое место? Затем вам нужно найти новое пространство имен и соответствующим образом изменить его и так далее.
Вот и все – ни больше, ни меньше. Код отражает ход времени; разработчик просто
необходимо идти в ногу с потоком, внося в него минимальные изменения, когда это необходимо. Вы не можете
заблудитесь и обвиняйте кого-то кроме себя, если вы обновите свою среду и не осознаете, что вам нужно изменить кучу строк кода, чтобы она снова заработала.
Я подразумеваю, что автор не несет ответственности за исходный код этой книги? Это полная противоположность;
автор всегда несет ответственность. Они должны сделать все возможное, чтобы исправить всю заявленную совместимость.
проблемы при обновлении репозитория GitHub. Однако у вас также должен быть свой собственный уровень
ответственность; более конкретно, вы должны понимать, как все работает в любой книге по развитию.
и неизбежное влияние времени на любой исходный код. Как бы тяжело ни было
автор работает над его поддержкой, патчи никогда не будут достаточно быстрыми или всеобъемлющими, чтобы сделать эти
строки кода всегда работают в любом сценарии. Поэтому самое главное, что вам нужно
понимание – даже до тем, о которых пойдет речь в книге – является наиболее ценной концепцией в современной разработке программного обеспечения: способность эффективно справляться с неизбежными изменениями, которые всегда будут происходить. кто бы ни был
отказывается понимать, что обречен; нет никакого способа обойти это.
Теперь, когда мы прояснили эти аспекты, давайте вернемся к работе.

Настройка проекта(ов)
Предполагая, что мы уже установили Visual Studio 2022 и Node.js, вот что нам нужно сделать:
1. Загрузите и установите .NET 6 SDK.
2. Убедитесь, что .NET CLI будет использовать эту версию SDK.
3. Установите Angular CLI.
4. Создайте новый проект .NET и Angular.
5. Проверьте вновь созданный проект в Visual Studio.
6. Обновите все пакеты и библиотеки до выбранных нами версий.
Давай приступим к работе.

Установка SDK для .NET 6
Пакет SDK для .NET 6 можно загрузить с официального URL-адреса Microsoft (https://dotnet.microsoft.
com/download/dotnet/6.0) или с официальной страницы выпуска GitHub (https://github.com/dotnet/
ядро/дерево/мастер/примечания к выпуску/6.0).

Установка очень проста – просто следуйте указаниям мастера до конца, чтобы выполнить работу.
следует:
Рисунок 2.1: Программа установки .NET SDK 6.0.100
Весь процесс установки не займет более пары минут.
Проверка версии SDK
После установки .NET SDK нам необходимо убедиться, что новый PATH SDK указан правильно.
установлен и/или что .NET CLI действительно будет его использовать. Самый быстрый способ проверить это — открыть Command
Подскажите и напишите следующее:
> дотнет --помощь
Убедитесь, что .NET CLI работает без проблем и что номер версии тот же, что мы установили минуту назад.
Если в командной строке не удается выполнить команду, перейдите в Панель управления | Система | Передовой
Системные настройки | Переменные среды и убедитесь, что C:\Program Files\dotnet\
папка присутствует в переменной среды PATH; при необходимости добавьте его вручную.

Установка Node.js и Angular CLI
Следующее, что нам нужно сделать, это установить интерфейс командной строки Angular, более известный как
Угловой интерфейс командной строки. Для этого нам нужно установить Node.js, чтобы мы могли получить доступ к npm и использовать его для
получите официальные пакеты Angular.
Если вы используете Windows, мы настоятельно рекомендуем установить Node.js с помощью nvm для Windows — удобного Node.js.
менеджер версий для системы Windows. Инструмент можно загрузить по следующему URL-адресу:
https://github.com/coreybutler/nvm-windows/releases.
После установки Node.js Angular CLI можно установить с помощью следующей команды:
npm install -g @angular/cli@13.0.1
После этого вы сможете ввести ng --version и получить логотип Angular CLI ASCII, содержащий версию установленных пакетов. Если это не так, возможно, вам придется добавить Node.js и/или
npm /bin/ в переменную среды PATH.
Создание проекта .NET и Angular
Теперь, когда наши фреймворки установлены, мы можем создать наш первый проект .NET и Angular – в
другими словами, наше первое приложение. Visual Studio 2022 предоставляет нам несколько вариантов для этого:
• Используйте шаблон ASP.NET Core с Angular, который был вариантом по умолчанию (и единственным) до
Visual Studio 2019: один проект, в котором размещаются как интерфейсное приложение Angular, так и серверная часть.
Базовый API ASP.NET.
• Используйте новый автономный шаблон TypeScript Angular вместе с ASP.NET Core Web.
Шаблон API — новый подход, представленный в Visual Studio 2022, который позволяет хранить интерфейсное приложение Angular и серверный API ASP.NET Core в двух отдельных проектах, хотя и полностью
способны взаимодействовать друг с другом.
Оба подхода имеют свои плюсы и минусы. Однопроектный подход, вероятно, может показаться более простым.
поддерживать сначала; однако у него есть два существенных недостатка:
• Это не помогает новым разработчикам полностью понять важность разделения внешнего интерфейса.
и внутренняя архитектура (а также кодовые базы), которая является ключевой концепцией при работе с
со СПА.
• Это не позволяет нам создавать интерфейсное приложение с использованием версии Angular CLI, установленной на
компьютер.
По этим двум причинам на протяжении всей книги мы будем выбирать многопроектный подход:
этот вариант поможет читателю лучше понять четкую основную логику обеих платформ,
не только во время разработки, но и когда нам в конечном итоге придется опубликовать и развернуть наши приложения.
Создание проекта Angular
Начнем с внешнего проекта Angular, который также предоставит имя нашей Visual Studio.
Решение 2022 года.

Для тех, кто не знает соглашений об именах Visual Studio, решение в основном такое:
совокупность нескольких проектов: при нашем многопроектном подходе у нас будет два
проекты (внешнее приложение Angular и серверный веб-API ASP.NET Core) в рамках
единственное решение.

Запустите Visual Studio, затем нажмите кнопку «Создать новый проект»: используйте текстовое поле поиска рядом с
верхней части окна, чтобы найти автономный шаблон TypeScript Angular, как показано на рисунке.
следующий скриншот:
Рисунок 2.2. Создание нового автономного шаблона TypeScript Angular.
Выберите этот шаблон и нажмите «Далее», чтобы получить доступ к экрану «Настроить новый проект». В следующих
скриншот, заполните форму со следующими значениями:
• Название проекта: HealthCheck.
• Местоположение: C:\Projects\.
• Название решения: HealthCheck.
• Поместите решение и проект в один и тот же каталог: Нет (снимите этот флажок).

Есть веская причина назвать наш проект HealthCheck, как мы вскоре увидим.
пока (без спойлеров, помните?).

Рисунок 2.3: Мастер настройки автономного шаблона TypeScript Angular
Само собой разумеется, что это всего лишь рекомендуемые варианты; однако в этой книге мы собираемся
используйте эти имена, что повлияет на наш исходный код с точки зрения имен классов, пространств имен и т. д.
on – и \Projects\ в качестве нашей корневой папки: неопытным разработчикам настоятельно рекомендуется использовать
те же имена и папки.
По завершении нажмите кнопку «Далее» еще раз, чтобы получить доступ к третьему и последнему разделу мастера: «Дополнительно».
информация.
Здесь нам нужно обязательно отметить параметр «Добавить интеграцию для пустого проекта веб-API ASP.NET».
Эта опция добавит несколько важных файлов в наш шаблон Angular, чтобы его можно было подключить к
проект ASP.NET Core, который мы вскоре создадим.
Есть веская причина назвать наш проект HealthCheck, как мы вскоре увидим.
пока (без спойлеров, помните?).
Также желательно выбирать папку корневого уровня с коротким именем, чтобы избежать возможных ошибок.
и/или проблемы, связанные со слишком длинными именами путей: Windows 10 имеет ограничение в 260 символов.
это может создать некоторые проблемы с некоторыми глубоко вложенными пакетами npm.

Как только мы нажмем кнопку «Создать», чтобы завершить работу мастера, Visual Studio начнет создавать и готовить наш новый проект: когда все настроено и сделано, появится графический интерфейс разработки с новым
файлы проекта четко видны в окне обозревателя решений, как показано на следующем снимке экрана:
Рисунок 2.4: Окно обозревателя решений
Теперь мы можем перейти к следующему шагу — созданию проекта веб-API ASP.NET Core.
Создание проекта веб-API ASP.NET Core.
Процесс добавления нашего второго (и последнего) проекта очень похож на то, что мы только что сделали, поэтому мы
просто кратко упомяните соответствующие шаги:
1. В обозревателе решений щелкните правой кнопкой мыши узел решения (Решение «HealthCheck»), затем выберите
Добавить > Новый проект.
2. Когда появится мастер, используйте текстовое поле поиска, чтобы найти проект веб-API ASP.NET Core.
выберите его и нажмите «Далее».

Дайте новому проекту следующее имя: HealthCheckAPI. Кроме того, обязательно создайте его в
папка решения, которую мы создали с помощью проекта Angular (это должна быть C:\Projects\HealthCheck\,
если мы не использовали другой путь). Как только это будет сделано, нажмите «Далее», чтобы перейти к следующему разделу.
Мастер.
4. Выберите .NET 6 Framework, затем оставьте параметры по умолчанию такими, какие они есть: Тип аутентификации: Нет, Настроить для HTTPS: отмечено; Включить Docker: флажок снят, Использовать контроллеры:
отмечено, Включить поддержку OpenAPI: отмечено, как показано на следующем снимке экрана.
Рисунок 2.5: Мастер настройки шаблона веб-API ASP.NET Core.
Как только это будет сделано, нажмите «Создать», чтобы завершить работу мастера. Проект HealthCheckAPI будет добавлен в
существующее решение, прямо под проектом HealthCheck.
Теперь у нас есть готовый фронтенд-проект и серверный проект в рамках одного и того же решения: мы просто
нам нужно внести несколько изменений в их настройки конфигурации, чтобы мы могли заставить их работать вместе.
Соединение двух проектов
Начнем с проекта Angular.
В обозревателе решений щелкните правой кнопкой мыши проект HealthCheck (угловой), затем выберите «Свойства».

В открывшемся модальном окне перейдите в Свойства конфигурации > Отладка, затем выберите запуск.
json-отладчик, как показано на следующем снимке экрана:
Рисунок 2.6: Окно свойств конфигурации проекта Angular.
Теперь пришло время заняться проектом ASP.NET Core Web API. На этот раз вместо использования графического интерфейса мы будем
просто измените базовый файл настроек.
В обозревателе решений откройте узел проекта HealthCheckAPI (ASP.NET), затем откройте /
Properties/ и дважды щелкните файл launchSettings.json, чтобы открыть его в текстовом редакторе.
Как только вы окажетесь там, выполните следующие изменения:
• Установите для всех настроек «launchBrowser» значение false.
• Замените случайно сгенерированные порты HTTP и HTTPS фиксированными значениями: мы собираемся использовать
40080 для HTTP и 40443 для HTTPS.
Причина использования фиксированных портов заключается в том, что нам придется иметь дело с некоторыми функциями платформы (такими как внутренние прокси), которые требуют фиксированных конечных точек. В том маловероятном случае
что эти порты в конечном итоге заняты и/или не могут быть использованы, не стесняйтесь изменить
их: просто обязательно применяйте одни и те же изменения на протяжении всей книги, чтобы избежать
получаю ошибки HTTP 404.

Вот как должен выглядеть наш файл launchSettings.json после этих изменений (обновленные строки:
выделено):

```json
{
  "$schema": "https://json.schemastore.org/launchsettings.json",
 "iisSettings": {
 "windowsAuthentication": false,
 "anonymousAuthentication": true,
 "iisExpress": {
 "applicationUrl": "http://localhost:40080",
 "sslPort": 40443
 }
 },
 "profiles": {
 "HealthCheckAPI": {
 "commandName": "Project",
 "dotnetRunMessages": true,
 "launchBrowser": false,
 "launchUrl": "swagger",
 "applicationUrl": "https://localhost:40443;http://localhost:40080",
 "environmentVariables": {
 "ASPNETCORE_ENVIRONMENT": "Development"
 }
 },
 "IIS Express": {
 "commandName": "IISExpress",
 "launchBrowser": false,
 "launchUrl": "swagger",
 "environmentVariables": {
 "ASPNETCORE_ENVIRONMENT": "Development"
 }
 }
 }
}
```
Теперь нам просто нужно указать Visual Studio, как правильно запускать наши проекты.
Настройка стартового проекта(ов)
И последнее, но не менее важное: нам нужно эффективно использовать одну из самых важных, но менее известных функций.
представлено в последних версиях Visual Studio, по крайней мере, для SPA: возможность настроить несколько
стартап-проекты:
1. В обозревателе решений щелкните правой кнопкой мыши решение HealthCheck (узел верхнего уровня) и выберите
Установите стартовые проекты.
2. В открывшемся модальном окне измените переключатель запуска проекта на «Единичный запуск».
выберите «Несколько запускаемых проектов», затем выберите «Начать» для каждого действия проекта.

Наконец, используйте две стрелки вправо, чтобы переместить проект HealthCheckAPI (ASP.NET).
над проектом HealthCheck (Angular), чтобы он был запущен первым.
4. Вот как должны выглядеть настройки множественного запускаемого проекта после этих изменений:
Рисунок 2.7: Окно настроек стартового проекта решения «HealthCheck»
Как только это будет сделано, мы сможем перейти к следующему (и последнему) шагу. Помните, мы говорили, что будем
имеете дело с фиксированными конечными точками? Вот первое, о чем нам нужно позаботиться.
В проекте HealthCheck откройте файл /src/proxy.conf.js, который является файлом конфигурации для
прокси-сервер, который будет использоваться сервером разработки Angular для доступа к URL-адресам нашего проекта API ASP.NET.
при запуске наших проектов в режиме отладки. Пока не беспокойтесь об этих концепциях; мы объясним
их в ближайшее время. На данный момент нам просто нужно убедиться, что прокси будет маршрутизировать API.
запросы на правильный URL-адрес, включая порт HTTPS.
По этой причине измените целевой URL-адрес, чтобы он соответствовал фиксированному порту HTTPS, который мы настроили в
Проект ASP.NET Core API, который должен иметь номер 50433 (если мы его не изменили):

```json
const PROXY_CONFIG = [
 {
 context: [
 "/weatherforecast",
 ],
 target: "https://localhost:40443",
 secure: false
 }
]
module.exports = PROXY_CONFIG;
```

Давайте также воспользуемся возможностью выбрать фиксированный порт HTTPS для сервера разработки Angular.
Откройте файл /.vscode/launch.json и измените порт HTTPS по умолчанию на 4200, как показано на рисунке.
следующий выделенный код:

```json
{
 "version": "0.2.0",
 "configurations": [
 {
 "type": "chrome",
 "request": "launch",
 "name": "localhost (Chrome)",
 "url": "https://localhost:4200",
 "webRoot": "${workspaceFolder}"
 },
 {
 "type": "edge",
 "request": "launch",
 "name": "localhost (Edge)",
 "url": "https://localhost:4200",
 "webRoot": "${workspaceFolder}"
 }
 ]
}
```

ВАЖНО: ваш файл launch.json может отличаться, если у вас Chrome и/или MS.
Эдж установлен. Просто сохраните блоки конфигурации для браузера, который есть в вашей системе.
и планируйте использовать для отладки вашего приложения и удалите (или не добавляйте) остальные, в противном случае
ваш проект выйдет из строя при запуске. В этой книге мы будем использовать Chrome и MS Edge.
следовательно, мы сохраним файл как есть.

Теперь мы, наконец, готовы запустить наши проекты и посмотреть, насколько хорошо они работают вместе… если только мы не хотим
потратить пару минут на изучение альтернативного «однопроектного» подхода.
Однопроектный подход
Если вас устраивает новый «многопроектный» подход, вы можете пропустить этот раздел и
перейти к следующему. Однако те, кто предпочитает использовать «классический» ASP.NET Core с Angular
Альтернативные шаблоны могут это делать бесплатно и не пострадают от этого выбора, поскольку все примеры кода
содержащиеся в этой книге, полностью совместимы с обоими подходами.
Несмотря на недостатки, о которых мы недавно говорили, наш шаблон по-прежнему обеспечивает удобный старт.
точка для создания приложения ASP.NET Core и Angular, добавления всех необходимых файлов и конфигурации общего назначения, которую мы сможем настроить в соответствии с нашими потребностями.

Самый эффективный способ создать решение с использованием шаблона ASP.NET Core с Angular — использовать
интерфейс командной строки dotnet.
Откройте терминал командной строки, создайте корневую папку, которая будет содержать наши проекты, например \Projects\.
– и проникни внутрь.
Оказавшись там, введите следующую команду, чтобы создать приложение Angular:

dotnet новый angular -o HealthCheck
Эта команда создаст полноценное приложение ASP.NET Core и Angular в папке C:\Projects\.
Папка HealthCheck\.
В этом шаблоне все файлы, связанные с Angular (включая файлы настроек), содержатся в
/ClientApp/ вместо размещения в отдельном проекте: довольно компактный шаблон
который содержит все необходимые файлы конфигурации .NET и Angular, ресурсы и зависимости.
Как мы видим, глядя на различные папки, рабочая среда содержит следующее:
• Папки ASP.NET MVC /Controllers/ и /Pages/ по умолчанию, каждая из которых содержит некоторые рабочие файлы.
образцы.
• Папка /ClientApp/src/ с некоторыми файлами TypeScript, содержащими исходный код
пример приложения Angular.
• Папка /ClientApp/e2e/, содержащая примеры тестов E2E, созданных с помощью Protractor.
рамки тестирования.
• Папка /wwwroot/, которая будет использоваться Visual Studio для создания оптимизированной версии
клиентский код всякий раз, когда нам нужно выполнить его локально или опубликовать в другом месте. Что
Изначально папка пуста, но она будет заполнена при первом запуске проекта.
Если мы потратим некоторое время на просмотр этих папок и просмотрим их содержимое, мы увидим
как разработчики .NET проделали огромную работу по упрощению работы .NET с проектом Angular
процесс настройки. Если мы сравним этот шаблон со встроенными шаблонами Angular 2.x/5.x, поставляемыми с
Visual Studio 2015/2017 мы увидим огромное улучшение с точки зрения читабельности и чистоты кода.
а также улучшенная структура файлов и папок.
Кроме того, те, кто боролся с такими инструментами запуска задач, как Grunt или Gulp, и/или инструментами разработки на стороне клиента, такими как
поскольку вебпак в недавнем прошлом, скорее всего, оценит тот факт, что этот шаблон не имеет ничего общего с
что: все задачи упаковки, сборки и компиляции полностью выполняются Visual Studio через
базовые интерфейсы командной строки .NET и Angular со специальными стратегиями загрузки для разработки и производства.
В общем, те, кто привык работать с серверной и клиентской частью в одном проекте, все равно могут предпочесть использовать этот шаблон. Однако, привыкнув к многопроектному подходу – и
разделение серверной и клиентской частей на два отдельных проекта – очень поможет нам
понять общую логику, которая управляет современными архитектурами на основе микросервисов и, таким образом, является
шанс, который мы не должны упустить, если хотим стать лучшими разработчиками.
Прежде чем двигаться дальше, нам следует выполнить быстрый тестовый запуск, чтобы убедиться, что наш проект работает правильно.
Об этом и пойдет речь в следующем разделе.

Выполнение тестового запуска
Лучший способ проверить, работает ли наш многопроектный подход должным образом, — провести быстрое тестирование.
запустить, запустив наши проекты в режиме отладки. Для этого нажмите кнопку «Пуск» Visual Studio или клавишу F5.
ключ для начала компиляции и запуска нашего приложения.
Через несколько секунд нам будет предложено доверять самозаверяющему сертификату, который сгенерирует ASP.NET Core.
чтобы разрешить нашему приложению обслуживаться через HTTPS (как показано на следующем снимке экрана): просто нажмите
Да, чтобы продолжить.

Если мы не хотим авторизовать самозаверяющие SSL-сертификаты ASP.NET Core, мы можем
установите флажок «Больше не спрашивать» перед тем, как нажать «Да».

Сразу после этого Visual Studio запустит три отдельных процесса:
• ASP.NET Core Server — веб-сервер, который будет обслуживать серверные API. Этот веб-сервер
будет Kestrel (по умолчанию) или IIS Express, в зависимости от конфигурации проекта. Любой из
они будут работать для наших целей, поскольку мы мудро настроили оба на использование одних и тех же фиксированных
конечные точки и порты HTTP/HTTPS.

- Сервер Angular Live Development — консольное приложение, действующее как веб-сервер,
разместите файлы нашего приложения Angular с помощью команды ngserve из Angular CLI.

- Our favorite web browser, such as MS Edge, Mozilla Firefox, or Google Chrome (we’re going to
use MS Edge from now on), which will interact with the Angular Live Development Server
through the fixed HTTPS endpoint we configured a while ago.

Страница, которую мы увидим в веб-браузере, показывает базовый компонент Angular, выполняющий простую операцию.
задача извлечения данных из проекта ASP.NET Core Web API: крошечная, но хорошая (и полностью работающая)
пример того, что мы будем делать дальше.
Мы только что сделали отличную проверку согласованности, чтобы убедиться, что наша система разработки работает правильно.
настроен. Если мы видим страницу, показанную на предыдущем скриншоте, это означает, что мы готовы двигаться дальше.
Поиск неисправностей
В том маловероятном случае, что мы этого не делаем, это, вероятно, означает, что мы либо что-то упускаем, либо что мы
получил какое-то конфликтующее программное обеспечение, препятствующее работе Visual Studio и/или базовых .NET и Angular CLI
от правильной компиляции проекта. Чтобы это исправить, мы можем попробовать сделать следующее:
• Удалите/переустановите Node.js, поскольку, возможно, у нас установлена устаревшая версия.
• Удалите/переустановите Visual Studio, так как наша текущая установка может быть сломана или повреждена.
.NET SDK уже должен поставляться вместе с ним; однако мы также можем попробовать переустановить его.
Если все равно не получается, мы можем попробовать установить Visual Studio и ранее упомянутые пакеты в
чистая среда (физическая система или виртуальная машина) для преодоления любых возможных проблем, связанных с нашей
текущая конфигурация операционной системы.

Обзор архитектуры
Прежде чем перейти к следующей главе, давайте потратим еще пару минут, чтобы полностью понять основную логику среды разработки, которую мы только что создали.
Мы уже видели, что когда Visual Studio запускает наши проекты в среде разработки, три
запускаются процессы: автономный проект Angular (HealthCheck), веб-API ASP.NET Core.
(HealthCheckAPI) и веб-браузер, который будет с ними взаимодействовать.

Вот простая диаграмма, которая суммирует, как эти три процесса работают вместе и взаимодействуют друг с другом.
друг друга:

Как видно из предыдущей диаграммы, веб-браузер вызовет Angular Live Development.
Сервер (который слушает порт HTTPS 4200), который будет обращаться с ними следующим образом:
• Непосредственно обслуживать все запросы к страницам Angular и статическим ресурсам.
• Проксировать все запросы API на веб-сервере Kestrel, на котором размещен веб-API ASP.NET Core (который
прослушивает HTTPS-порт 40443).
• Важно понимать, что сервер Angular Live Development Server предназначен только для локальных
разработка, где это позволит использовать большинство инструментов отладки и значительно ускорит кодирование.
опыт работы с такими функциями, как горячая перезагрузка. Всякий раз, когда мы хотим развернуть наши приложения в рабочей среде или в любой среде, отличной от локальной разработки, мы собираемся встроить наше приложение в
производственные пакеты и развернуть их на интерфейсном веб-сервере (или CDN), что в основном займет
его место на предыдущей диаграмме. Мы подробно поговорим обо всем этом в главе 15 «Окна».
Linux и развертывание Azure, когда мы научимся публиковать наши приложения.

Краткое содержание
Все идет нормально; мы только что создали рабочий скелет того, что нас ждет. Прежде чем двигаться дальше, давайте
Сделайте краткий обзор того, что мы только что сделали (и узнали) в этой главе.

Прежде всего, мы узнали различия между различными подходами, которые можно использовать для создания
веб-приложения в наши дни: SPA, MPA и PWA. Мы также объяснили, что, поскольку мы будем использовать .NET и
Angular, мы будем придерживаться подхода SPA, но также реализуем большинство функций PWA, таких как сервис.
рабочие файлы и файлы веб-манифестов. Пытаясь воспроизвести реалистичный производственный сценарий, мы
также рассмотрели наиболее распространенные функции SPA, сначала с технической точки зрения, а затем поставив себя на место типичного владельца продукта и попытавшись перечислить его ожидания.
И последнее, но не менее важное: мы научились правильно настраивать среду разработки; мы решили сделать
что используется последний шаблон Angular SPA, поставляемый с .NET SDK, и таким образом используется стандарт ASP.
NET Core/.NET 6. Затем мы создали автономный проект Angular и ядро ASP.NET Core.
серверный API-проект с использованием Visual Studio, настроил их для совместной работы и протестировал
общий результат, чтобы убедиться, что все работает правильно. Наконец-то мы потратили немного драгоценного времени
чтобы полностью понять, как работает только что построенная нами архитектура разработки.
В следующей главе, главе 3 «Осмотр», мы подробно рассмотрим приложение, которое мы только что создали.
чтобы правильно понять, как серверная часть .NET и интерфейс Angular выполняют свои соответствующие задачи.
задачи и что они могут сделать вместе.

Предлагаемые темы
Для получения дополнительной информации мы рекомендуем следующие темы: одностраничное приложение (SPA), прогрессивное веб-приложение (PWA), собственное веб-приложение (NWA), многостраничное приложение (MPA), Scrum,
Манифест Agile, веб-API ASP.NET, Angular CLI, Node.js, npm, nvm для Windows, Visual Studio 2022,
и шаблоны проектов Visual Studio.

















































